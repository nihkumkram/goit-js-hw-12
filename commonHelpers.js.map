{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45159640-00f670568c1d01c324bb6c884';\n\nexport async function searchGalleryQuery(query, page = 1) {\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createImages(data) {\n  const lightbox = new SimpleLightbox('.gallery-list a', {\n    captions: true,\n    captionsData: 'alt',\n    captionsDelay: 250,\n  });\n\n  const galleryList = document.querySelector('.gallery-list');\n\n  let images = data.hits\n    .map(\n      image =>\n        `<div class=\"image-wrapper\">\n    <a href=\"${image.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\n    </a>\n    <div class=\"text-wrapper\">\n    <div class=\"text-item\"><h5 class=\"text-header\">Likes</h5><p class=\"text-paragraph\">${image.likes}</p></div>\n    <div class=\"text-item\"><h5 class=\"text-header\">Views</h5><p class=\"text-paragraph\">${image.views}</p></div>\n    <div class=\"text-item\"><h5 class=\"text-header\">Comments</h5><p class=\"text-paragraph\">${image.comments}</p></div>\n    <div class=\"text-item\"><h5 class=\"text-header\">Downloads</h5><p class=\"text-paragraph\">${image.downloads}</p></div>\n    </div>\n    </div>`\n    )\n    .join('');\n\n  galleryList.insertAdjacentHTML('beforeend', images);\n  lightbox.refresh();\n}\n\nexport function clearImages() {\n  const galleryList = document.querySelector('.gallery-list');\n  galleryList.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchGalleryQuery } from './js/pixabay-api';\nimport { createImages, clearImages } from './js/render-functions';\n\nconst form = document.querySelector('.form-gallery');\nconst input = document.querySelector('.form-gallery-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst scrollToTopBtn = document.querySelector('.scroll-to-top');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', handleSubmitBtn);\nloadMoreBtn.addEventListener('click', handleLoadMore);\nscrollToTopBtn.addEventListener('click', scrollToTop);\n\nasync function handleSubmitBtn(event) {\n  event.preventDefault();\n  clearImages();\n  loader.classList.remove('hidden');\n\n  currentQuery = input.value.trim();\n  currentPage = 1;\n\n  await fetchImages();\n\n  form.reset();\n}\n\nasync function handleLoadMore() {\n  currentPage += 1;\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  try {\n    const data = await searchGalleryQuery(currentQuery, currentPage);\n    loader.classList.add('hidden');\n    if (data.total === 0 || currentQuery === '') {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    createImages(data);\n    if (data.hits.length === 0 || currentPage * 15 >= data.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n    smoothScroll();\n    showScrollToTopBtn();\n  } catch (error) {\n    console.error(error);\n    loader.classList.add('hidden');\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery-list')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction showScrollToTopBtn() {\n  if (window.scrollY > 1000) {\n    scrollToTopBtn.classList.remove('hidden');\n  } else {\n    scrollToTopBtn.classList.add('hidden');\n  }\n}\n\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'auto',\n  });\n}\n\n\nwindow.addEventListener('scroll', scrollToTopBtn);\n"],"names":["URL","API_KEY","searchGalleryQuery","query","page","axios","error","createImages","data","lightbox","SimpleLightbox","galleryList","images","image","clearImages","form","input","loader","loadMoreBtn","scrollToTopBtn","currentPage","currentQuery","handleSubmitBtn","handleLoadMore","scrollToTop","event","fetchImages","iziToast","smoothScroll","showScrollToTopBtn","cardHeight"],"mappings":"owBACA,MAAMA,EAAM,2BACNC,EAAU,qCAET,eAAeC,EAAmBC,EAAOC,EAAO,EAAG,CACxD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAK,CACpC,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCnBO,SAASC,EAAaC,EAAM,CACjC,MAAMC,EAAW,IAAIC,EAAe,kBAAmB,CACrD,SAAU,GACV,aAAc,MACd,cAAe,GACnB,CAAG,EAEKC,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIC,EAASJ,EAAK,KACf,IACCK,GACE;AAAA,eACOA,EAAM,aAAa;AAAA,oCACEA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,yFAGeA,EAAM,KAAK;AAAA,yFACXA,EAAM,KAAK;AAAA,4FACRA,EAAM,QAAQ;AAAA,6FACbA,EAAM,SAAS;AAAA;AAAA,WAGvG,EACA,KAAK,EAAE,EAEVF,EAAY,mBAAmB,YAAaC,CAAM,EAClDH,EAAS,QAAO,CAClB,CAEO,SAASK,GAAc,CAC5B,MAAMH,EAAc,SAAS,cAAc,eAAe,EAC1DA,EAAY,UAAY,EAC1B,CC9BA,MAAMI,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAQ,SAAS,cAAc,qBAAqB,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAiB,SAAS,cAAc,gBAAgB,EAE9D,IAAIC,EAAc,EACdC,EAAe,GAEnBN,EAAK,iBAAiB,SAAUO,CAAe,EAC/CJ,EAAY,iBAAiB,QAASK,CAAc,EACpDJ,EAAe,iBAAiB,QAASK,CAAW,EAEpD,eAAeF,EAAgBG,EAAO,CACpCA,EAAM,eAAc,EACpBX,IACAG,EAAO,UAAU,OAAO,QAAQ,EAEhCI,EAAeL,EAAM,MAAM,OAC3BI,EAAc,EAEd,MAAMM,EAAW,EAEjBX,EAAK,MAAK,CACZ,CAEA,eAAeQ,GAAiB,CAC9BH,GAAe,EACf,MAAMM,EAAW,CACnB,CAEA,eAAeA,GAAc,CAC3B,GAAI,CACF,MAAMlB,EAAO,MAAMN,EAAmBmB,EAAcD,CAAW,EAE/D,GADAH,EAAO,UAAU,IAAI,QAAQ,EACzBT,EAAK,QAAU,GAAKa,IAAiB,GAAI,CAC3CM,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACV,CAAO,EACD,MACD,CACDpB,EAAaC,CAAI,EACbA,EAAK,KAAK,SAAW,GAAKY,EAAc,IAAMZ,EAAK,WACrDU,EAAY,UAAU,IAAI,QAAQ,EAClCS,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,GAEDT,EAAY,UAAU,OAAO,QAAQ,EAEvCU,IACAC,GACD,OAAQvB,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBW,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAEA,SAASW,GAAe,CACtB,KAAM,CAAE,OAAQE,CAAU,EAAK,SAC5B,cAAc,eAAe,EAC7B,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAEA,SAASD,GAAqB,CACxB,OAAO,QAAU,IACnBV,EAAe,UAAU,OAAO,QAAQ,EAExCA,EAAe,UAAU,IAAI,QAAQ,CAEzC,CAEA,SAASK,GAAc,CACrB,OAAO,SAAS,CACd,IAAK,EACL,SAAU,MACd,CAAG,CACH,CAGA,OAAO,iBAAiB,SAAUL,CAAc"}